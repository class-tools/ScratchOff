# ScratchOff 版本命名规则

这个文档仅支持语言 `zh-Hans`。

## 开源版本

开源版本的版本号为 `[Major].[Minor].[Release]-[Type].[x]`。

- `Major`：大版本更新，如重构代码等。
- `Minor`：功能更新，如添加一些功能。
- `Release`：错误修复，如修一个锅。
- `Type.x`：测试版或补丁发布时会带有 `Type`，`x` 为第 `x` 个 `Type`。
  - `alpha`：预览版本，有可能不稳定，也称 α 版。
  - `beta`：测试版本，较 α 稳定，也称 β 版。
  - `rc`：预发布版本，较 β 稳定，可分为 rc 公测版及 rc 预发布，预发布与正式版相差不多，较为稳定。
  - `patch`：补丁，常用于没有 Issues 时的修锅，一般在 rc 版或正式版发布后发布。

举例：`1.1.4-alpha.5` 表示第一个大版本，第一次功能更新，第四次错误修复的第五个预览版。

## 编译版本

本版本号规则从 `1.1.0-beta.1` 发布前的第一次内部预览版（`1.1.0.1.1.1`）开始实施。

编译版本的版本号为 `[Major].[Minor].[Releses].[Build].[Typenum].[x]`，使用 32 位二进制存储。

- `Major, Minor, Releases`：对应开源版本的这三个版本号，每个字段占 4 位二进制，共占 12 位二进制。
- `Build`：以 `1.1.0-beta.1` 发布前的第一次内部测试版为 1 的编译次数，占 15 位二进制。
- `Typenum`：为开源版本中 `Type` 的数字表示，占 1 位二进制。
- `x`：对应开源版本中的 `x`，占 4 位二进制。
  - 内部版（内预，内调，内测）：`x` 为下一个公共版/正式/补丁版的 `x`。
  - 公共版（公预，公测，发测，预发）：`x` 为对应 `alpha`、`beta`、`rc` 开源版本的 `x`。
  - 正式：`x` 为 0。
  - 补丁版（补丁，补正）：`x` 为该版本的第 `x` 个补丁。

编译版本的类型可分为内部预览版，内部测试版，公共预览版，公共测试版，发布测试版，预先发布版，正式发布版，补丁安装包及正式补丁版。  
下文中 开源 指可以下载源代码自行编译，开放 指对公众开放编译版本。

- 内部预览版：简称内预，不开源不开放，一般为功能制作了显示部分，征求意见的版本，Build 号无任何限制，此版本 `Typenum` 为 1。
- 内部调试版：简称内调，不开源不开放，属于 bug 特别多的版本，Build 号应为 2 的倍数，`Typenum` 为 2。
- 内部测试版：简称内测，不开源不开放，属于 bug 较多的版本，Build 号应为 4 的倍数，`Typenum` 为 4。
- 公共预览版：简称公预，开源但不开放，属于 bug 多的版本，Build 号应为 4 的倍数，`Typenum` 为 6。
- 公共测试版：简称公测，开源且也开放，属于 bug 少的版本，Build 号应为 8 的倍数，`Typenum` 为 8。
- 发布测试版：简称发测，开源且也开放，属于 bug 较少的版本，Build 号应为 8 的倍数，`Typenum` 为 10。
- 预先发布版：简称预发，开源且也开放，属于 bug 特别少的版本，Build 号应为 8 的倍数，`Typenum` 为 12。
- 正式发布版：简称正式，开源且也开放，提供完整的压缩文件及安装程序，属于 bug 最少的版本，Build 号应为 16 的倍数，`Typenum` 为 18。
- 补丁安装包：简称补丁，开源且也开放，提供有修改文件的替换安装包，属于 bug 修复版本，Build 号应为 8 的倍数，`Typenum` 为 14。
- 补丁正式版：简称补正，开源且也开放，提供完整的压缩文件及安装程序，属于 bug 修复版本，Build 号应为 16 的倍数，`Typenum` 为 16。

Build 号为倍数的原因是 `Typenum` 除为 1 外其他情况均需占用不止 1 位的二进制，所以要从 Build 号中借用最后的几位。

举例：`1.9.1.98.1.0` 表示 `1.9.1` 版，第 98 次编译，属于正式版发布前的内部预览版。

## 补丁编号

六位补丁编号为 `KB[Number][Version][Type]`

- `Number`：以第一个补丁为 1 的补丁发布次数，占三位。
- `Version`：该补丁针对的版本号，仅保留到功能更新，占两位。
- `Type`：该补丁的类型，占一位。
  - 补丁安装包：2
  - 补丁正式版：4

举例：`KB114514` 表示第 114 个补丁，针对 `5.1` 版发布的，为补丁正式版。

补丁号暂时够用，不够用了会有七位，甚至八位补丁编号。